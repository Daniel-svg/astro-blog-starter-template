---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
import AdsRight from '../components/AdsRight.astro';
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
		<style>
		.timer-display {
                margin-bottom: 2rem;
                padding: 1rem;
                background-color: #f7f9fc;
                border-radius: 8px;
                border-left: 5px solid #555;
            }
		  .right-ads {
				position: fixed;
				right: 12px;
				top: 120px;
				width: 300px;
				z-index: 9999;
			}

			/* æ‰‹æ©Ÿè‡ªå‹•éš±è—ï¼ˆAdSense è¦å®šä¸èƒ½åœ¨æ‰‹æ©Ÿæ”¾ fixed å»£å‘Šï¼‰ */
			@media (max-width: 768px) {
				.right-ads {
				display: none;
				}
			}
		</style>
	</head>
	<body>
		<Header />
		<main>
			<h1>ğŸ§‘â€ğŸš€ ç¶²ç«™ç†å¿µèˆ‡ç™¼æƒ³ ğŸ’¡</h1>
			<div class="timer-display">
                <p>ç•¶å‰æ™‚é–“ï¼š<strong id="currentTime">è¼‰å…¥ä¸­...</strong></p>
				<p>ä¸‹å€‹å‡æ—¥å€’æ•¸ï¼š<strong id="holidayCountdown">æ­£åœ¨è¨ˆç®—...</strong></p>
            </div>
				<p>åœ¨è³‡è¨Šçˆ†ç‚¸çš„æ™‚ä»£ï¼Œæˆ‘å€‘æ¯å¤©éƒ½åœ¨èˆ‡æ™‚é–“è³½è·‘ï¼ŒåŠªåŠ›åœ¨è¤‡é›œçš„æ—¥å¸¸ä¸­å°‹æ±‚ç‰‡åˆ»çš„æ¸…æ™°èˆ‡é«˜æ•ˆã€‚é€™å€‹å°å°çš„ç¶²ç«™â€”â€”å¾ä¸€å€‹ç°¡å–®çš„ã€Œå€’æ•¸è¨ˆæ™‚å™¨ã€é–‹å§‹â€”â€”ä¾¿æ˜¯æˆ‘åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œé‡å°å„ç¨®ç‘£ç¢éœ€æ±‚æ‰€æ¿€ç™¼å‡ºçš„<strong>éˆæ„Ÿå¯¦é©—å®¤</strong>ã€‚</p>

				<p>é€™è£¡ä¸å–®æ˜¯æä¾›åŠŸèƒ½çš„å·¥å…·ç®±ï¼Œæ›´æ˜¯ä¸€å€‹åˆ†äº«ç”Ÿæ´»å¿ƒå¾—èˆ‡æ•¸ä½ç™¼æƒ³çš„å¹³å°ã€‚æ¯ä¸€å€‹ä¸Šç·šçš„å°å·¥å…·ï¼Œç„¡è«–æ˜¯ç²¾æº–æŒæ¡åœ‹å®šå‡æœŸçš„å€’æ•¸ï¼Œé‚„æ˜¯å”åŠ©æ‚¨å°ˆæ³¨å·¥ä½œçš„è¨ˆæ™‚å™¨ï¼Œéƒ½æºè‡ªæˆ‘å°ã€Œå¦‚ä½•è®“ç”Ÿæ´»æ›´æœ‰æ•ˆç‡ã€æ›´å°‘ç„¦æ…®ã€çš„æ·±å…¥æ€è€ƒã€‚æˆ‘å€‘ç›¸ä¿¡ï¼Œé€éå¾®å°çš„æ•¸ä½è¼”åŠ©ï¼Œå¯ä»¥å¹«åŠ©æ‚¨æ›´è¼•é¬†åœ°è¦åŠƒæ™‚é–“ã€é”æˆç›®æ¨™ï¼Œä¸¦è®“ç›®å…‰èšç„¦åœ¨çœŸæ­£é‡è¦çš„äº‹æƒ…ä¸Šã€‚</p>

				<p>æˆ‘å€‘å°‡æŒçºŒæ¢ç´¢ä¸¦æ–°å¢å„ç¨®å¾æ—¥å¸¸ç—›é»å‡ºç™¼çš„å°åŠŸèƒ½ï¼Œä¸¦åˆ†äº«èƒŒå¾Œçš„ä½¿ç”¨å¿ƒå¾—èˆ‡ç¨‹å¼ç¢¼ç™¼æƒ³éç¨‹ã€‚æœŸå¾…é€™è£¡ä¸åƒ…æ˜¯æ‚¨çš„è¨ˆæ™‚å¹«æ‰‹ï¼Œæ›´æ˜¯æ‚¨<strong>é«˜æ•ˆæ•¸ä½ç”Ÿæ´»çš„ä¸€æ‰‡çª—</strong>ã€‚</p>

				<p style="font-size: 0.9em; color: #555;">æ„Ÿè¬æ‚¨çš„é€ è¨ªï¼Œå¸Œæœ›é€™äº›ç™¼æƒ³ä¹Ÿèƒ½ç‚ºæ‚¨çš„æ—¥å¸¸å¸¶ä¾†ä¸€é»å¹«åŠ©ã€‚</p>
		</main>
		<Footer />
		<script>
			// é¡¯ç¤ºç•¶å‰æ™‚é–“
			function updateTime(){
			// [ç¨‹å¼ç¢¼ä¿æŒä¸è®Š]
			document.getElementById('currentTime').textContent = new Date().toLocaleString();
			}
			setInterval(updateTime,1000);
			updateTime();

			// é¡¯ç¤ºä¸‹ä¸€å€‹å‡æ—¥å€’æ•¸
			async function fetchNextHoliday(){
			// [ç¨‹å¼ç¢¼ä¿æŒä¸è®Š]
			const year = new Date().getFullYear();
			const res = await fetch(`https://cdn.jsdelivr.net/gh/ruyut/TaiwanCalendar/data/${year}.json`);
			const data = await res.json();
			const today = new Date();
			const upcoming = data.filter(h=>h.description && new Date(h.date.slice(0,4)+'-'+h.date.slice(4,6)+'-'+h.date.slice(6,8)) >= today)
									.sort((a,b)=>a.date.localeCompare(b.date))[0];
			if(upcoming){
				const target = new Date(upcoming.date.slice(0,4)+'-'+upcoming.date.slice(4,6)+'-'+upcoming.date.slice(6,8));
				function updateCountdown(){
				const diff = Math.floor((target-new Date())/1000);
				if(diff>0){
					const d=Math.floor(diff/86400),
						h=Math.floor(diff%86400/3600),
						m=Math.floor(diff%3600/60),
						s=diff%60;
					document.getElementById('holidayCountdown').textContent=`${upcoming.description} é‚„æœ‰ ${d} å¤© ${h} æ™‚ ${m} åˆ† ${s} ç§’`;
				} else {
					document.getElementById('holidayCountdown').textContent=`${upcoming.description} å·²åˆ°ä¾†ï¼`;
				}
				}
				setInterval(updateCountdown,1000);
				updateCountdown();
			} else {
				document.getElementById('holidayCountdown').textContent="æœªæ‰¾åˆ°æœªä¾†å‡æ—¥";
			}
			}
			fetchNextHoliday();
		</script>
		<div class="right-ads">
			<!-- google-ad -->
			<ins class="adsbygoogle"
				style="display:block"
				data-ad-client="ca-pub-6026639928482840"
				data-ad-slot="8483122106"
				data-ad-format="auto"
				data-full-width-responsive="true"></ins>
			<script>
				(adsbygoogle = window.adsbygoogle || []).push({});
			</script>
		</div>		
	</body>
</html>
