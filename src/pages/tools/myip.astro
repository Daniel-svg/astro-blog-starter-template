---
import BaseHead from '../../components/BaseHead.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../../consts';

const title = 'æˆ‘çš„ IP æŸ¥è©¢å·¥å…·';
const description = 'å¿«é€ŸæŸ¥è©¢æ‚¨çš„å…¬é–‹ IP åœ°å€åŠåœ°ç†ä½ç½®è³‡è¨Šã€‚';
---

<!doctype html>
<html lang="zh-Hant">
Â  <head>
Â  Â  <BaseHead title={title} description={description} />

Â  Â  <link
Â  Â  Â  rel="stylesheet"
Â  Â  Â  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
Â  Â  Â  integrity="sha512-1y6w3p0G6g7G1xL2nC9n8FzVj9hK4k5L5gD5j6g7O2xS4i5xP7xT7p8D2o4b4g7C6g5e7M5w6X9G3gH4m1o5Q=="
Â  Â  Â  crossorigin="anonymous"
Â  Â  Â  referrerpolicy="no-referrer"
Â  Â  />

Â  Â  <script
Â  Â  Â  async
Â  Â  Â  src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6026639928482840"
Â  Â  Â  crossorigin="anonymous"
Â  Â  ></script>

Â  Â  <style>
		.ip-main-content {
			max-width: 760px;
			margin: 0 auto;
			padding: 2.5rem 1rem;
		}

		.card {
			padding: 3rem 2rem;
			border-radius: 16px;
			background: #ffffff;
			box-shadow: 0 6px 25px rgba(0, 0, 0, 0.08);
			text-align: center;
		}

		.card h1 {
			font-size: 1.9rem;
			font-weight: 600;
			color: #374151;
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 8px;
		}

		.ip-address {
			margin: 1.8rem auto;
			padding: 1rem 1.6rem;
			background: #eef4ff;
			color: #2563eb;
			border-radius: 12px;
			font-size: 2.4rem;
			font-weight: 700;
			font-family: "Roboto Mono", monospace;
			display: inline-block;
			/* ç¢ºä¿é•· IP åœ¨æ‰‹æ©Ÿä¸Šå¯ä»¥æ›è¡Œ */
			word-break: break-all; 
		}

		/* è³‡è¨Šå…©æ¬„ Grid ä½ˆå±€ */
		.details {
			display: grid;
			grid-template-columns: 1fr 1fr; /* æ¡Œé¢ç‰ˆå…©æ¬„ */
			gap: 14px 30px;
			margin: 2rem auto 2rem auto;
			max-width: 600px;
			text-align: left;
		}

		.detail-box {
			background: #f9fafb;
			padding: 12px 15px;
			border-radius: 10px;
			font-size: 1.05rem;
			color: #374151;
			border-left: 4px solid #3b82f6;
			display: flex;
			align-items: center;
			gap: 10px;
			/* ç¢ºä¿æ–‡å­—åœ¨ box å…§èƒ½è‡ªå‹•æ›è¡Œ */
			word-break: break-word; 
		}

		.detail-box i {
			color: #3b82f6;
			flex-shrink: 0;
			font-size: 1rem;
		}
Â  Â  </style>
Â  </head>

Â  <body>
Â  Â  <Header />

Â  Â  <main class="ip-main-content">
Â  Â  Â  <div class="card">
Â  Â  Â  Â  <h1>ğŸŒ æ‚¨çš„å…¬é–‹ IP åœ°å€æ˜¯</h1>
Â  Â  Â  Â  <div class="ip-address" id="ip">è¼‰å…¥ä¸­...</div>

Â  Â  Â  Â  <div class="details" id="details">
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-globe"></i>åœ‹å®¶ï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-city"></i>åŸå¸‚ï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-map-marker-alt"></i>åœ°å€/å·ï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-building"></i>ISPï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-clock"></i>æ™‚å€ï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-map-pin"></i>ç¶“ç·¯åº¦ï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <button onclick="fetchIP()">é‡æ–°æ•´ç† / å†æ¬¡æŸ¥è©¢</button>

Â  Â  Â  Â  <div class="data-source">
Â  Â  Â  Â  Â  <p>æ•¸æ“šä¾†æºï¼š</p>
Â  Â  Â  Â  Â  <p>
Â  Â  Â  Â  Â  Â  å…¬é–‹ IP æŸ¥è©¢ç”±
Â  Â  Â  Â  Â  Â  <a href="https://www.ipify.org/" target="_blank" rel="noopener noreferrer"
Â  Â  Â  Â  Â  Â  Â  >ipify</a
Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  æä¾›ï¼›åœ°ç†ä½ç½®è³‡è¨Šç”±
Â  Â  Â  Â  Â  Â  <a href="https://ipinfo.io/" target="_blank" rel="noopener noreferrer"
Â  Â  Â  Â  Â  Â  Â  >IPinfo</a
Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  æä¾›ã€‚
Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </main>

Â  Â  <Footer />

Â  Â  <script is:inline>
Â  Â  Â  async function fetchIP() {
Â  Â  Â  Â  const ipElement = document.getElementById('ip');
Â  Â  Â  Â  const detailsElement = document.getElementById('details');
        const apiToken = '1b172809b09566'; // IPinfo API Token

Â  Â  Â  Â  // 1. é‡ç½®é¡¯ç¤ºç‹€æ…‹
Â  Â  Â  Â  ipElement.textContent = 'è¼‰å…¥ä¸­...';
Â  Â  Â  Â  detailsElement.innerHTML = `
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-globe"></i>åœ‹å®¶ï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-city"></i>åŸå¸‚ï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-map-marker-alt"></i>åœ°å€/å·ï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-building"></i>ISPï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-clock"></i>æ™‚å€ï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-map-pin"></i>ç¶“ç·¯åº¦ï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  `;

Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  // 2. æŸ¥è©¢ IP
Â  Â  Â  Â  Â  const ipRes = await fetch('https://api.ipify.org?format=json');
Â  Â  Â  Â  Â  if (!ipRes.ok) throw new Error('ç„¡æ³•å¾ ipify ç²å– IP');
Â  Â  Â  Â  Â  const ipData = await ipRes.json();
Â  Â  Â  Â  Â  const ip = ipData.ip;
Â  Â  Â  Â  Â  ipElement.textContent = ip;

Â  Â  Â  Â  Â  // 3. æŸ¥è©¢åœ°ç†ä½ç½®è³‡è¨Š
Â  Â  Â  Â  Â  const infoRes = await fetch(
Â  Â  Â  Â  Â  Â  `https://ipinfo.io/${ip}/json?token=${apiToken}`
Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  if (!infoRes.ok) throw new Error('ç„¡æ³•å¾ IPinfo ç²å–åœ°ç†è³‡è¨Š');
Â  Â  Â  Â  Â  const infoData = await infoRes.json();

Â  Â  Â  Â  Â  // è™•ç†ç¶“ç·¯åº¦ (loc æ ¼å¼é€šå¸¸ç‚º "lat,lon")
Â  Â  Â  Â  Â  const latLonDisplay = infoData.loc ? infoData.loc.replace(',', ', ') : 'æœªçŸ¥';
          
          // æå– ISP åç¨± (åªå–ç¬¬ä¸€å€‹å–®è©)
          const ispName = infoData.org ? infoData.org.split(' ').slice(1).join(' ') || infoData.org : 'æœªçŸ¥';

Â  Â  Â  Â  Â  // 4. é¡¯ç¤ºçµæœ
Â  Â  Â  Â  Â  detailsElement.innerHTML = `
Â  Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-globe"></i>åœ‹å®¶ï¼š${infoData.country || 'æœªçŸ¥'}</div>
Â  Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-city"></i>åŸå¸‚ï¼š${infoData.city || 'æœªçŸ¥'}</div>
Â  Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-map-marker-alt"></i>åœ°å€/å·ï¼š${infoData.region || 'æœªçŸ¥'}</div>
Â  Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-building"></i>ISPï¼š${ispName}</div>
Â  Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-clock"></i>æ™‚å€ï¼š${infoData.timezone || 'æœªçŸ¥'}</div>
Â  Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-map-pin"></i>ç¶“ç·¯åº¦ï¼š${latLonDisplay}</div>
Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  console.error("IP æŸ¥è©¢éŒ¯èª¤:", error);
Â  Â  Â  Â  Â  ipElement.textContent = 'ç„¡æ³•å–å¾— IP';
Â  Â  Â  Â  Â  detailsElement.innerHTML = `
Â  Â  Â  Â  Â  Â  <div class="detail-box" style="grid-column: 1 / -1; border-left: 4px solid #dc2626;">
Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-exclamation-triangle" style="color: #dc2626;"></i>è¼‰å…¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯æˆ– API Token (éŒ¯èª¤: ${error.message})
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }
Â  Â  Â  }

Â  Â  Â  // é é¢è¼‰å…¥å¾Œç«‹å³åŸ·è¡ŒæŸ¥è©¢
Â  Â  Â  document.addEventListener('DOMContentLoaded', fetchIP);
Â  Â  </script>
Â  </body>
</html>