---
// ç¢ºä¿è·¯å¾‘æ­£ç¢ºï¼šmyip.astro åœ¨ src/pages/tools/ï¼Œæ•…éœ€è¦ ..
import BaseHead from '../../components/BaseHead.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../../consts';

const title = 'æˆ‘çš„ IP æŸ¥è©¢å·¥å…·';
const description = 'å¿«é€ŸæŸ¥è©¢æ‚¨çš„å…¬é–‹ IP åœ°å€åŠåœ°ç†ä½ç½®è³‡è¨Šã€‚';
---

<!doctype html>
<html lang="zh-Hant">
	<head>
		<BaseHead title={title} description={SITE_DESCRIPTION} />Â 
		
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1y6w3p0G6g7G1xL2nC9n8FzVj9hK4k5L5gD5j6g7O2xS4i5xP7xT7p8D2o4b4g7C6g5e7M5w6X9G3gH4m1o5Q==" crossorigin="anonymous" referrerpolicy="no-referrer" />

		<script async src="[https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6026639928482840](https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6026639928482840)" crossorigin="anonymous"></script>

		<style>
			/* ç¢ºä¿ Header å’Œ Footer ä¹‹é–“çš„ä¸»å…§å®¹å€å¡Šç½®ä¸­ */
			.ip-main-content {
				width: calc(100% - 2em);
				max-width: 1200px;
				margin: 0 auto;
				padding: 2em 1em;
			}
			
			/* IP å¡ç‰‡æ¨£å¼ (Google Material é¢¨æ ¼) */
			.card {
				max-width: 700px;
				margin: 40px auto;
				padding: 40px;
				background-color: #ffffff;
				border-radius: 12px;
				/* Material Design é™°å½± */
				box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 10px 20px rgba(0, 0, 0, 0.05);
				text-align: center;
				transition: all 0.3s ease;
			}

			.card h1 {
				font-size: 1.8rem;
				color: #3c4043;
				margin-bottom: 0.5rem;
				font-weight: 400;
			}

			.ip-address {
				font-family: 'Roboto Mono', monospace;
				font-size: 2.8rem;
				font-weight: 700;
				color: #1a73e8;
				background-color: #e8f0fe;
				padding: 20px;
				border-radius: 8px;
				margin-bottom: 30px;
				word-break: break-all;
				display: inline-block;
			}

			/* è©³ç´°è³‡è¨Šç¶²æ ¼ä½ˆå±€ */
			.details {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
				gap: 15px;
				margin-bottom: 30px;
				text-align: left;
			}

			.detail-box {
				background-color: #f8f9fa;
				padding: 15px;
				border-radius: 8px;
				font-size: 1rem;
				color: #5f6368;
				font-weight: 500;
				border-left: 4px solid #4285f4;
				display: flex;
				align-items: center;
				box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
			}
			
			/* åœ–ç¤ºæ¨£å¼ */
			.detail-box i {
				margin-right: 10px;
				color: #1a73e8;
				font-size: 1.1rem;
				width: 20px;
				text-align: center;
			}

			.card button {
				padding: 12px 30px;
				background-color: #4285f4;
				color: white;
				border: none;
				border-radius: 8px;
				cursor: pointer;
				font-size: 1rem;
				font-weight: 500;
				transition: background-color 0.2s ease, box-shadow 0.2s ease;
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
				margin-bottom: 20px; /* ç‚ºè³‡æ–™ä¾†æºé¨°å‡ºç©ºé–“ */
			}

			.card button:hover {
				background-color: #3367d6;
				box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
			}

			/* æ–°å¢è³‡æ–™ä¾†æºå€å¡Šæ¨£å¼ */
			.data-source {
				margin-top: 25px;
				padding-top: 15px;
				border-top: 1px solid #e0e0e0;
				font-size: 0.85rem;
				color: #70757a; /* Google æ·ºç°è‰²æ–‡å­— */
				text-align: center;
			}

			.data-source a {
				color: #1a73e8;
				text-decoration: none;
				font-weight: 500;
			}
			
			.data-source a:hover {
				text-decoration: underline;
			}
		</style>
	</head>
	<body>
		<Header />Â 
		
		<main class="ip-main-content">
			<div class="card">
				<h1>ğŸŒ æ‚¨çš„å…¬é–‹ IP åœ°å€æ˜¯</h1>
				<div class="ip-address" id="ip">è¼‰å…¥ä¸­...</div>
				
				<div class="details" id="details">
					<div class="detail-box"><i class="fas fa-globe"></i>åœ‹å®¶ï¼šè¼‰å…¥ä¸­</div>
					<div class="detail-box"><i class="fas fa-city"></i>åŸå¸‚ï¼šè¼‰å…¥ä¸­</div>
					<div class="detail-box"><i class="fas fa-map-marker-alt"></i>åœ°å€/å·ï¼šè¼‰å…¥ä¸­</div>
					<div class="detail-box"><i class="fas fa-building"></i>ISPï¼šè¼‰å…¥ä¸­</div>
					<div class="detail-box"><i class="fas fa-clock"></i>æ™‚å€ï¼šè¼‰å…¥ä¸­</div>
					<div class="detail-box"><i class="fas fa-map-pin"></i>ç¶“ç·¯åº¦ï¼šè¼‰å…¥ä¸­</div>
				</div>
				
				<button onclick="fetchIP()">é‡æ–°æ•´ç† / å†æ¬¡æŸ¥è©¢</button>
				
				<div class="data-source">
					<p>æ•¸æ“šä¾†æºï¼š</p>
					<p>
						å…¬é–‹ IP æŸ¥è©¢ç”± 
						<a href="https://www.ipify.org/" target="_blank" rel="noopener noreferrer">ipify</a>
						æä¾›ï¼›åœ°ç†ä½ç½®è³‡è¨Šç”± 
						<a href="https://ipinfo.io/" target="_blank" rel="noopener noreferrer">IPinfo</a> 
						æä¾›ã€‚
					</p>
				</div>
				
			</div>
		</main>
		
		<Footer />Â 
		
			<script>	
				async function fetchIP() {
		Â  Â  	const ipElement = document.getElementById('ip');
				const detailsElement = document.getElementById('details');
				
		Â  Â  	ipElement.textContent = 'è¼‰å…¥ä¸­...';
		Â  Â  	detailsElement.innerHTML = `
		Â  Â  Â  Â 		<div class="detail-box"><i class="fas fa-globe"></i>åœ‹å®¶ï¼šè¼‰å…¥ä¸­</div>
					<div class="detail-box"><i class="fas fa-city"></i>åŸå¸‚ï¼šè¼‰å…¥ä¸­</div>
					<div class="detail-box"><i class="fas fa-map-marker-alt"></i>åœ°å€/å·ï¼šè¼‰å…¥ä¸­</div>
					<div class="detail-box"><i class="fas fa-building"></i>ISPï¼šè¼‰å…¥ä¸­</div>
					<div class="detail-box"><i class="fas fa-clock"></i>æ™‚å€ï¼šè¼‰å…¥ä¸­</div>
					<div class="detail-box"><i class="fas fa-map-pin"></i>ç¶“ç·¯åº¦ï¼šè¼‰å…¥ä¸­</div>
		Â  Â  	`;
				
		Â  Â  	try {
		Â  Â  Â  Â  		// å…ˆå–å¾— IP
		Â  Â  Â  Â  		const ipRes = await fetch('https://api.ipify.org?format=json');
		Â  Â  Â  Â  		const ipData = await ipRes.json();
		Â  Â  Â  Â  		const ip = ipData.ip;
		Â  Â  Â  Â  		ipElement.textContent = ip;

		Â  Â  Â  Â  		// å†å–å¾—è©³ç´°è³‡è¨Š (ä½¿ç”¨ ipinfo.io çš„ API)
						// ä¿®æ­£ï¼šç§»é™¤è·³è„«å­—å…ƒ \
		Â  Â  Â  Â  		const infoRes = await fetch(`https://ipinfo.io/${ip}/json?token=1b172809b09566`); 
		Â  Â  Â  Â  		const infoData = await infoRes.json();
						
						// è™•ç†ç¶“ç·¯åº¦ (loc æ¬„ä½æ˜¯ "ç·¯åº¦,ç¶“åº¦" æ ¼å¼)
						const [lat, lon] = (infoData.loc || '-,').split(',');
						// ä¿®æ­£ï¼šç§»é™¤è·³è„«å­—å…ƒ \
						const latLonDisplay = infoData.loc ? `${lat}, ${lon}` : '-'; 
						
		Â  Â  Â  Â  		detailsElement.innerHTML = `
		Â  Â  Â  Â  Â  Â  		<div class="detail-box"><i class="fas fa-globe"></i>åœ‹å®¶ï¼š${infoData.country || '-'}</div>
		Â  Â  Â  Â  Â  Â  		<div class="detail-box"><i class="fas fa-city"></i>åŸå¸‚ï¼š${infoData.city || '-'}</div>
							<div class="detail-box"><i class="fas fa-map-marker-alt"></i>åœ°å€/å·ï¼š${infoData.region || '-'}</div>
		Â  Â  Â  Â  Â  Â  		<div class="detail-box"><i class="fas fa-building"></i>ISPï¼š${infoData.org ? infoData.org.split(' ')[0] : '-'}</div>
		Â  Â  Â  Â  Â  Â  		<div class="detail-box"><i class="fas fa-clock"></i>æ™‚å€ï¼š${infoData.timezone || '-'}</div>
							<div class="detail-box"><i class="fas fa-map-pin"></i>ç¶“ç·¯åº¦ï¼š${latLonDisplay}</div>
		Â  Â  Â  Â  		`;
		Â  Â  	} catch (error) {
						console.error("IP æŸ¥è©¢éŒ¯èª¤:", error);
		Â  Â  Â  Â  		ipElement.textContent = 'ç„¡æ³•å–å¾— IP';
		Â  Â  Â  Â  		detailsElement.innerHTML = `
		Â  Â  Â  Â  Â  Â  		<div class="detail-box"><i class="fas fa-exclamation-triangle"></i>è¼‰å…¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯æˆ–ç¨å¾Œå†è©¦</div>
		Â  Â  Â  Â  		`;
		Â  Â  	}
			}
			// åœ¨é é¢è¼‰å…¥æ™‚åŸ·è¡Œä¸€æ¬¡
			fetchIP();
		</script>
	</body>
</html>