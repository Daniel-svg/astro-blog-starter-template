---
import BaseHead from '../../components/BaseHead.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../../consts';

const title = 'æˆ‘çš„ IP æŸ¥è©¢å·¥å…·';
const description = 'å¿«é€ŸæŸ¥è©¢æ‚¨çš„å…¬é–‹ IP åœ°å€åŠåœ°ç†ä½ç½®è³‡è¨Šã€‚';
---

<!doctype html>
<html lang="zh-Hant">
Â  <head>
Â  Â  Â  Â  <BaseHead title={title} description={description} />

Â  Â  Â  Â  <link
Â  Â  Â  rel="stylesheet"
Â  Â  Â  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
Â  Â  Â  integrity="sha512-1y6w3p0G6g7G1xL2nC9n8FzVj9hK4k5L5gD5j6g7O2xS4i5xP7xT7p8D2o4b4g7C6g5e7M5w6X9G3gH4m1o5Q=="
Â  Â  Â  crossorigin="anonymous"
Â  Â  Â  referrerpolicy="no-referrer"
Â  Â  />

Â  Â  Â  Â  <script
Â  Â  Â  async
Â  Â  Â  src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6026639928482840"
Â  Â  Â  crossorigin="anonymous"
Â  Â  ></script>

Â  Â  <style>
		/* ğŸš€ é é¢å°ˆå±¬æ¨£å¼ï¼šåªé‡å° IP æŸ¥è©¢å¡ç‰‡åŠå…¶å…§å®¹å®šç¾©æ¨£å¼ */

		/* æ ¸å¿ƒå¡ç‰‡å®¹å™¨ï¼šè«‹ç¢ºä¿ BaseHead å·²ç‚º main æ¨™ç±¤è¨­ç½® max-width å’Œ margin: auto */
		.card {
			/* ç”±æ–¼ main æ¨™ç±¤çš„ padding å·²ç”± BaseHead å®šç¾©ï¼Œé€™è£¡æˆ‘å€‘åªé—œæ³¨å¡ç‰‡æœ¬èº«çš„æ¨£å¼ */
			padding: 3rem 2rem;
			border-radius: 16px;
			background: #ffffff;
			box-shadow: 0 6px 25px rgba(0, 0, 0, 0.08);
			text-align: center;
			max-width: 760px; /* å†æ¬¡ç¢ºä¿å¡ç‰‡å¯¬åº¦åˆç† */
			margin: 0 auto; /* ç¢ºä¿å¡ç‰‡åœ¨ main å®¹å™¨å…§å±…ä¸­ */
		}
		
		/* æ¨™é¡Œ */
		.card h1 {
			font-size: 1.9rem;
			font-weight: 600;
			color: #374151;
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 8px;
		}

		/* IP åœ°å€é¡¯ç¤º */
		.ip-address {
			margin: 1.8rem auto;
			padding: 1rem 1.6rem;
			background: #eef4ff;
			color: #2563eb;
			border-radius: 12px;
			font-size: 2.4rem;
			font-weight: 700;
			font-family: "Roboto Mono", monospace;
			display: inline-block;
			word-break: break-all; 
		}

		/* è³‡è¨Šå…©æ¬„ Grid ä½ˆå±€ (æ¡Œé¢ç‰ˆ) */
		.details {
			display: grid;
			grid-template-columns: 1fr 1fr; 
			gap: 14px 30px;
			margin: 2rem auto 2rem auto;
			max-width: 600px; 
			text-align: left;
		}

		/* è³‡è¨Šå–®å€‹æ–¹å¡Š */
		.detail-box {
			background: #f9fafb;
			padding: 12px 15px;
			border-radius: 10px;
			font-size: 1.05rem;
			color: #374151;
			border-left: 4px solid #3b82f6;
			display: flex;
			align-items: center;
			gap: 10px;
			word-break: break-word; 
		}

		.detail-box i {
			color: #3b82f6;
			flex-shrink: 0;
			font-size: 1rem;
		}
		
		/* ğŸ“± æ‰‹æ©Ÿæ’ç‰ˆå°ˆå±¬ï¼šç¢ºä¿ .details åœ¨çª„è¢å¹•ä¸‹åˆ‡æ›ç‚ºå–®æ¬„ */
		@media (max-width: 640px) {
			.details {
				grid-template-columns: 1fr; /* å–®æ¬„å †ç–Š */
				gap: 14px 0; 
			}
			.card {
				/* æ‰‹æ©Ÿä¸Šç¸®å°å¡ç‰‡ padding */
				padding: 2rem 1rem;
			}
			.ip-address {
				/* æ‰‹æ©Ÿä¸Šç¸®å°å­—é«” */
				font-size: 1.8rem; 
			}
		}

		/* æŒ‰éˆ• */
		.card button {
			margin-top: 10px;
			padding: 12px 26px;
			background: #3b82f6;
			color: white;
			border: none;
			border-radius: 10px;
			font-size: 1.1rem;
			cursor: pointer;
			transition: 0.25s;
		}

		.card button:hover {
			background: #1d4ed8;
			box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
		}

		/* è³‡æ–™ä¾†æº */
		.data-source {
			margin-top: 2.8rem;
			padding-top: 1.3rem;
			border-top: 1px solid #e5e7eb;
			font-size: 0.88rem;
			color: #6b7280;
		}
Â  Â  </style>
Â  </head>

Â  <body>
Â  Â  <Header />

Â  Â  Â  Â  <main> 
Â  Â  Â  <div class="card">
Â  Â  Â  Â  <h1>ğŸŒ æ‚¨çš„å…¬é–‹ IP åœ°å€æ˜¯</h1>
Â  Â  Â  Â  <div class="ip-address" id="ip">è¼‰å…¥ä¸­...</div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="details" id="details">
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-globe"></i>åœ‹å®¶ï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-city"></i>åŸå¸‚ï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-building"></i>ISPï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-map-marker-alt"></i>åœ°å€/å·ï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-map-pin"></i>ç¶“ç·¯åº¦ï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-clock"></i>æ™‚å€ï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <button onclick="fetchIP()">é‡æ–°æ•´ç† / å†æ¬¡æŸ¥è©¢</button>

Â  Â  Â  Â  <div class="data-source">
Â  Â  Â  Â  Â  <p>æ•¸æ“šä¾†æºï¼š</p>
Â  Â  Â  Â  Â  <p>
Â  Â  Â  Â  Â  Â  å…¬é–‹ IP æŸ¥è©¢ç”±
Â  Â  Â  Â  Â  Â  <a href="https://www.ipify.org/" target="_blank" rel="noopener noreferrer"
Â  Â  Â  Â  Â  Â  Â  >ipify</a
Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  æä¾›ï¼›åœ°ç†ä½ç½®è³‡è¨Šç”±
Â  Â  Â  Â  Â  Â  <a href="https://ipinfo.io/" target="_blank" rel="noopener noreferrer"
Â  Â  Â  Â  Â  Â  Â  >IPinfo</a
Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  æä¾›ã€‚
Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </main>

Â  Â  <Footer />

Â  Â  <script is:inline>
Â  Â  Â  async function fetchIP() {
Â  Â  Â  Â  const ipElement = document.getElementById('ip');
Â  Â  Â  Â  const detailsElement = document.getElementById('details');
Â  Â  Â  Â  const apiToken = '1b172809b09566'; // IPinfo API Token

Â  Â  Â  Â  // 1. é‡ç½®é¡¯ç¤ºç‹€æ…‹ 
Â  Â  Â  Â  ipElement.textContent = 'è¼‰å…¥ä¸­...';
Â  Â  Â  Â  detailsElement.innerHTML = `
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-globe"></i>åœ‹å®¶ï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-city"></i>åŸå¸‚ï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-building"></i>ISPï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-map-marker-alt"></i>åœ°å€/å·ï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-map-pin"></i>ç¶“ç·¯åº¦ï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-clock"></i>æ™‚å€ï¼šè¼‰å…¥ä¸­</div>
Â  Â  Â  Â  `;

Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  // 2. æŸ¥è©¢ IP
Â  Â  Â  Â  Â  const ipRes = await fetch('https://api.ipify.org?format=json');
Â  Â  Â  Â  Â  if (!ipRes.ok) throw new Error('ç„¡æ³•å¾ ipify ç²å– IP');
Â  Â  Â  Â  Â  const ipData = await ipRes.json();
Â  Â  Â  Â  Â  const ip = ipData.ip;
Â  Â  Â  Â  Â  ipElement.textContent = ip;

Â  Â  Â  Â  Â  // 3. æŸ¥è©¢åœ°ç†ä½ç½®è³‡è¨Š
Â  Â  Â  Â  Â  const infoRes = await fetch(
Â  Â  Â  Â  Â  Â  `https://ipinfo.io/${ip}/json?token=${apiToken}`
Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  if (!infoRes.ok) throw new Error('ç„¡æ³•å¾ IPinfo ç²å–åœ°ç†è³‡è¨Š');
Â  Â  Â  Â  Â  const infoData = await infoRes.json();

Â  Â  Â  Â  Â  // è™•ç†ç¶“ç·¯åº¦ (loc æ ¼å¼é€šå¸¸ç‚º "lat,lon")
Â  Â  Â  Â  Â  const latLonDisplay = infoData.loc ? infoData.loc.replace(',', ', ') : 'æœªçŸ¥';
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  // æå– ISP åç¨± (å˜—è©¦ç§»é™¤ AS è™Ÿç¢¼)
Â  Â  Â  Â  Â  const ispName = infoData.org ? infoData.org.split(' ').slice(1).join(' ') || infoData.org : 'æœªçŸ¥';

Â  Â  Â  Â  Â  // 4. é¡¯ç¤ºçµæœ 
Â  Â  Â  Â  Â  detailsElement.innerHTML = `
Â  Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-globe"></i>åœ‹å®¶ï¼š${infoData.country || 'æœªçŸ¥'}</div>
Â  Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-city"></i>åŸå¸‚ï¼š${infoData.city || 'æœªçŸ¥'}</div>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-building"></i>ISPï¼š${ispName}</div>
Â  Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-map-marker-alt"></i>åœ°å€/å·ï¼š${infoData.region || 'æœªçŸ¥'}</div>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-map-pin"></i>ç¶“ç·¯åº¦ï¼š${latLonDisplay}</div>
Â  Â  Â  Â  Â  Â  <div class="detail-box"><i class="fas fa-clock"></i>æ™‚å€ï¼š${infoData.timezone || 'æœªçŸ¥'}</div>
Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  console.error("IP æŸ¥è©¢éŒ¯èª¤:", error);
Â  Â  Â  Â  Â  ipElement.textContent = 'ç„¡æ³•å–å¾— IP';
Â  Â  Â  Â  Â  detailsElement.innerHTML = `
Â  Â  Â  Â  Â  Â  <div class="detail-box" style="grid-column: 1 / -1; border-left: 4px solid #dc2626;">
Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-exclamation-triangle" style="color: #dc2626;"></i>è¼‰å…¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯æˆ– API Token (éŒ¯èª¤: ${error.message})
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }
Â  Â  Â  }

Â  Â  Â  // é é¢è¼‰å…¥å¾Œç«‹å³åŸ·è¡ŒæŸ¥è©¢
Â  Â  Â  document.addEventListener('DOMContentLoaded', fetchIP);
Â  Â  </script>
Â  </body>
</html>